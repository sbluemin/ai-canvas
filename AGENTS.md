# AI Canvas - í”„ë¡œë•íŠ¸ ê°€ì´ë“œ

## í”„ë¡œì íŠ¸ ê°œìš”

**AI Canvas**ëŠ” Gemini AIì™€ ëŒ€í™”í•˜ë©° ì‹¤ì‹œê°„ìœ¼ë¡œ ë§ˆí¬ë‹¤ìš´ ë¬¸ì„œë¥¼ ì‘ì„±í•˜ëŠ” ë©€í‹° í”Œë«í¼ ì—ë””í„°ì…ë‹ˆë‹¤.

### í•µì‹¬ ê°€ì¹˜
- **AI í˜‘ì—…**: Gemini AIì™€ ìì—°ìŠ¤ëŸ¬ìš´ ëŒ€í™”ë¡œ ë¬¸ì„œ ì‘ì„±
- **ì‹¤ì‹œê°„ í¸ì§‘**: WYSIWYG ë§ˆí¬ë‹¤ìš´ ì—ë””í„°ë¡œ ì¦‰ê°ì ì¸ í”¼ë“œë°±
- **í¬ë¡œìŠ¤ í”Œë«í¼**: Electron ë°ìŠ¤í¬í†±, ì›¹ ë¸Œë¼ìš°ì €, ì„œë²„ ëª¨ë“œ ì§€ì›
- **í…ìŠ¤íŠ¸ ì„ íƒ ì§ˆì˜**: ë¬¸ì„œì˜ íŠ¹ì • ë¶€ë¶„ì„ ì„ íƒí•´ AIì—ê²Œ ì§ˆë¬¸

### ê¸°ìˆ  ìŠ¤íƒ
- **Frontend**: React 19, TypeScript, Vite, Milkdown
- **Desktop**: Electron 34
- **Server**: Express 4, Node.js 22+
- **State**: Zustand
- **Styling**: CSS Modules

---

## í•µì‹¬ ê¸°ëŠ¥

### 1. AI ì±„íŒ… ì¸í„°í˜ì´ìŠ¤
- **ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë°**: SSE(Server-Sent Events)ë¡œ AI ì‘ë‹µ ì‹¤ì‹œê°„ ìˆ˜ì‹ 
- **ëŒ€í™” íˆìŠ¤í† ë¦¬**: ëª¨ë“  ëŒ€í™” ë‚´ìš© ìë™ ì €ì¥ ë° í‘œì‹œ
- **ìº”ë²„ìŠ¤ ì ìš©**: AI ì‘ë‹µì„ í´ë¦­ í•œ ë²ˆìœ¼ë¡œ ì—ë””í„°ì— ë°˜ì˜
- **í”¼ë“œë°± ì‹œìŠ¤í…œ**: ê° ì‘ë‹µì— ëŒ€í•œ ê¸ì •/ë¶€ì • í”¼ë“œë°± ê°€ëŠ¥
- **ëª¨ë¸ ì„ íƒ**: Gemini ëª¨ë¸ ë²„ì „ ì„ íƒ UI (ì¤€ë¹„ ì¤‘)

### 2. ë§ˆí¬ë‹¤ìš´ ì—ë””í„°
- **WYSIWYG í¸ì§‘**: Milkdown ê¸°ë°˜ ì‹¤ì‹œê°„ ë Œë”ë§
- **ìë™ ì €ì¥**: 1ì´ˆë§ˆë‹¤ ë³€ê²½ì‚¬í•­ ìë™ ê°ì§€ ë° ì €ì¥
- **íŒŒì¼ ê´€ë¦¬**: íŒŒì¼ ì—´ê¸°/ì €ì¥/ìƒˆ íŒŒì¼ ìƒì„±
- **í¸ì§‘ íˆìŠ¤í† ë¦¬**: Undo/Redo ê¸°ëŠ¥
- **ë¦¬ì¹˜ í…ìŠ¤íŠ¸**: ë³¼ë“œ, ì´íƒ¤ë¦­, ë¦¬ìŠ¤íŠ¸, ì½”ë“œ ë¸”ë¡ ë“± ì „ì²´ ë§ˆí¬ë‹¤ìš´ ë¬¸ë²• ì§€ì›

### 3. í…ìŠ¤íŠ¸ ì„ íƒ ì¸í„°ë™ì…˜
- **ì„ íƒ íŒì—…**: í…ìŠ¤íŠ¸ë¥¼ ë“œë˜ê·¸í•˜ë©´ íŒì—… ì…ë ¥ì°½ í‘œì‹œ
- **ì»¨í…ìŠ¤íŠ¸ ì§ˆì˜**: ì„ íƒí•œ í…ìŠ¤íŠ¸ë¥¼ ì»¨í…ìŠ¤íŠ¸ë¡œ AIì—ê²Œ ì§ˆë¬¸
- **ìë™ í¬ì»¤ìŠ¤**: íŒì—… í‘œì‹œ ì‹œ ì…ë ¥ì°½ì— ìë™ í¬ì»¤ìŠ¤

### 4. ë°˜ì‘í˜• ë ˆì´ì•„ì›ƒ
- **ë°ìŠ¤í¬í†± ëª¨ë“œ**: ì¢Œìš° ë¶„í•  í™”ë©´ (ì±„íŒ… + ì—ë””í„°)
- **ëª¨ë°”ì¼ ëª¨ë“œ**: ë“œë¡œì–´(Drawer) ë°©ì‹ ì±„íŒ… íŒ¨ë„
- **í¬ê¸° ì¡°ì ˆ**: Allotmentë¡œ íŒ¨ë„ í¬ê¸° ììœ  ì¡°ì •

---

## í”„ë¡ íŠ¸ì—”ë“œ ì•„í‚¤í…ì²˜

### ì „ì²´ ë ˆì´ì•„ì›ƒ êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    App.tsx                           â”‚  â† ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                      â”‚                               â”‚
â”‚    ChatPanel         â”‚        CanvasPanel            â”‚
â”‚  (ì±„íŒ… ì¸í„°í˜ì´ìŠ¤)    â”‚      (ì—ë””í„° íŒ¨ë„)            â”‚
â”‚                      â”‚                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚ í—¤ë” ì˜ì—­      â”‚  â”‚  â”‚  ë¬¸ì„œ ì œëª© ì˜ì—­          â”‚ â”‚
â”‚  â”‚ - Gemini ë¡œê³   â”‚  â”‚  â”‚  - ì œëª© í¸ì§‘ ê¸°ëŠ¥        â”‚ â”‚
â”‚  â”‚ - ëª¨ë¸ ì„ íƒ    â”‚  â”‚  â”‚  - íŒŒì¼ ê´€ë¦¬ ë²„íŠ¼        â”‚ â”‚
â”‚  â”‚ - ìƒˆ ì±„íŒ…      â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚  â”‚  EditorToolbar           â”‚ â”‚
â”‚  â”‚                â”‚  â”‚  â”‚  - ì‹¤í–‰ì·¨ì†Œ/ì¬ì‹¤í–‰       â”‚ â”‚
â”‚  â”‚ ë©”ì‹œì§€ ì˜ì—­    â”‚  â”‚  â”‚  - í…ìŠ¤íŠ¸ ì„œì‹ ë²„íŠ¼      â”‚ â”‚
â”‚  â”‚                â”‚  â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”‚                          â”‚ â”‚
â”‚  â”‚ â”‚ ì‚¬ìš©ì ë©”ì‹œì§€â”‚ â”‚  â”‚  â”‚  MilkdownEditor          â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â”‚  (ë§ˆí¬ë‹¤ìš´ WYSIWYG)      â”‚ â”‚
â”‚  â”‚                â”‚  â”‚  â”‚                          â”‚ â”‚
â”‚  â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚  â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚ â”‚
â”‚  â”‚ â”‚ AI ì‘ë‹µ    â”‚ â”‚  â”‚  â”‚  â”‚ SelectionPopup   â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚  â”‚  â”‚  â”‚ (í…ìŠ¤íŠ¸ ì„ íƒ ì‹œ) â”‚   â”‚ â”‚
â”‚  â”‚ â”‚ â”‚ìº”ë²„ìŠ¤ì ìš©â”‚ â”‚ â”‚  â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚ â”‚
â”‚  â”‚ â”‚ â”‚ğŸ‘ ğŸ‘   â”‚ â”‚ â”‚  â”‚  â”‚                          â”‚ â”‚
â”‚  â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚  â”‚  â”‚                          â”‚ â”‚
â”‚  â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚  â”‚  â”‚                          â”‚ â”‚
â”‚  â”‚                â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤  â”‚                               â”‚
â”‚  â”‚ ì…ë ¥ ì˜ì—­      â”‚  â”‚                               â”‚
â”‚  â”‚ - í…ìŠ¤íŠ¸ ì…ë ¥  â”‚  â”‚                               â”‚
â”‚  â”‚ - ë§ˆì´í¬ ë²„íŠ¼  â”‚  â”‚                               â”‚
â”‚  â”‚ - ì „ì†¡ ë²„íŠ¼    â”‚  â”‚                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â”‚                               â”‚
â”‚                      â”‚                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ì»´í¬ë„ŒíŠ¸ ê³„ì¸µ êµ¬ì¡°

```
App.tsx (ë£¨íŠ¸)
â”œâ”€â”€ ChatPanel.tsx (ì±„íŒ… ì¸í„°í˜ì´ìŠ¤)
â”‚   â””â”€â”€ Message ì»´í¬ë„ŒíŠ¸ë“¤ (ë™ì  ìƒì„±)
â”‚       â”œâ”€â”€ ì‚¬ìš©ì ë©”ì‹œì§€
â”‚       â””â”€â”€ AI ì‘ë‹µ ë©”ì‹œì§€
â”‚           â”œâ”€â”€ "ìº”ë²„ìŠ¤ì— ì ìš©" ë²„íŠ¼
â”‚           â””â”€â”€ í”¼ë“œë°± ë²„íŠ¼ (ğŸ‘ ğŸ‘)
â”‚
â””â”€â”€ CanvasPanel.tsx (ì—ë””í„° íŒ¨ë„)
    â”œâ”€â”€ ë¬¸ì„œ ì œëª© í—¤ë”
    â”‚   â”œâ”€â”€ ì œëª© í¸ì§‘ ë²„íŠ¼
    â”‚   â””â”€â”€ íŒŒì¼ ê´€ë¦¬ ë²„íŠ¼ (ì—´ê¸°, ì €ì¥, ìƒˆ íŒŒì¼)
    â”œâ”€â”€ EditorToolbar.tsx (í¸ì§‘ ë„êµ¬ëª¨ìŒ)
    â”‚   â”œâ”€â”€ íˆìŠ¤í† ë¦¬ ë²„íŠ¼ (Undo/Redo)
    â”‚   â”œâ”€â”€ ì„œì‹ ë²„íŠ¼ (Bold, Italic)
    â”‚   â””â”€â”€ êµ¬ì¡° ë²„íŠ¼ (Heading, List)
    â”œâ”€â”€ MilkdownEditor.tsx (ë§ˆí¬ë‹¤ìš´ ì—ë””í„°)
    â”‚   â””â”€â”€ Milkdown React ë˜í¼
    â””â”€â”€ SelectionPopup.tsx (í…ìŠ¤íŠ¸ ì„ íƒ íŒì—…)
        â””â”€â”€ AI ì§ˆë¬¸ ì…ë ¥í¼
```

### ì£¼ìš” ì»´í¬ë„ŒíŠ¸ ìƒì„¸

#### 1. App.tsx (ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸)
**ì—­í• **: ì „ì²´ ë ˆì´ì•„ì›ƒ ê´€ë¦¬ ë° ë°˜ì‘í˜• ì²˜ë¦¬
**ìƒíƒœ ê´€ë¦¬**:
- `isMobile`: í™”ë©´ í¬ê¸°ì— ë”°ë¥¸ ëª¨ë°”ì¼ ì—¬ë¶€ (ë¸Œë ˆì´í¬í¬ì¸íŠ¸: 1024px)
- `isDrawerOpen`: ëª¨ë°”ì¼ ëª¨ë“œì—ì„œ ì±„íŒ… ë“œë¡œì–´ ì—´ë¦¼/ë‹«í˜ ìƒíƒœ

**ë ˆì´ì•„ì›ƒ ëª¨ë“œ**:
1. **ë°ìŠ¤í¬í†± ëª¨ë“œ** (>= 1024px):
   - Allotment ë¼ì´ë¸ŒëŸ¬ë¦¬ë¡œ ì¢Œìš° ë¶„í• 
   - ì±„íŒ… íŒ¨ë„: ìµœì†Œ 320px, ìµœëŒ€ 480px, ê¸°ë³¸ 35%
   - ì—ë””í„° íŒ¨ë„: ìµœì†Œ 500px, ë‚˜ë¨¸ì§€ ê³µê°„
   - ë“œë˜ê·¸ë¡œ íŒ¨ë„ í¬ê¸° ì¡°ì ˆ ê°€ëŠ¥

2. **ëª¨ë°”ì¼ ëª¨ë“œ** (< 1024px):
   - ì—ë””í„°ê°€ ì „ì²´ í™”ë©´ ì°¨ì§€
   - í–„ë²„ê±° ë²„íŠ¼ìœ¼ë¡œ ì±„íŒ… ë“œë¡œì–´ í† ê¸€
   - ë“œë¡œì–´ ì—´ë¦¼ ì‹œ ì˜¤ë²„ë ˆì´ í‘œì‹œ
   - ì˜¤ë²„ë ˆì´ í´ë¦­ ì‹œ ë“œë¡œì–´ ìë™ ë‹«í˜

#### 2. ChatPanel.tsx (ì±„íŒ… ì¸í„°í˜ì´ìŠ¤)
**ì—­í• **: AIì™€ì˜ ëŒ€í™” ì¸í„°í˜ì´ìŠ¤ ì œê³µ
**ì£¼ìš” ê¸°ëŠ¥**:
- ë©”ì‹œì§€ íˆìŠ¤í† ë¦¬ ìŠ¤í¬ë¡¤ í‘œì‹œ
- ì‹¤ì‹œê°„ ìŠ¤íŠ¸ë¦¬ë° ì‘ë‹µ ìˆ˜ì‹  ë° í‘œì‹œ
- ìº”ë²„ìŠ¤ì— ì ìš© ë²„íŠ¼ìœ¼ë¡œ ì—ë””í„°ì— ë‚´ìš© ì‚½ì…
- í”¼ë“œë°± ë²„íŠ¼ (ê¸ì •/ë¶€ì •)

**UI êµ¬ì„±**:
- **í—¤ë”**:
  - Gemini ë¡œê³  (ê·¸ë¼ë°ì´ì…˜ ë‹¤ì´ì•„ëª¬ë“œ ì•„ì´ì½˜)
  - ëª¨ë¸ ì„ íƒ ë“œë¡­ë‹¤ìš´ (í˜„ì¬: "Gemini 2.0 Flash Experimental")
  - ìƒˆ ì±„íŒ… ë²„íŠ¼ (+ ì•„ì´ì½˜)
  
- **ë©”ì‹œì§€ ì˜ì—­**:
  - ì‚¬ìš©ì ë©”ì‹œì§€: ìš°ì¸¡ ì •ë ¬, ì–´ë‘ìš´ ë°°ê²½
  - AI ì‘ë‹µ: ì¢Œì¸¡ ì •ë ¬, ë°ì€ ë°°ê²½
  - AI ì‘ë‹µì—ëŠ” "ìº”ë²„ìŠ¤ì— ì ìš©" ë²„íŠ¼ê³¼ í”¼ë“œë°± ë²„íŠ¼ í‘œì‹œ
  - ìë™ ìŠ¤í¬ë¡¤ (ìƒˆ ë©”ì‹œì§€ ì¶”ê°€ ì‹œ)

- **ì…ë ¥ ì˜ì—­**:
  - ë©€í‹°ë¼ì¸ í…ìŠ¤íŠ¸ ì…ë ¥ (ë†’ì´ ìë™ ì¡°ì ˆ)
  - ë§ˆì´í¬ ë²„íŠ¼ (ìŒì„± ì…ë ¥, ì¤€ë¹„ ì¤‘)
  - ì „ì†¡ ë²„íŠ¼ (Enterë¡œ ì „ì†¡, Shift+Enterë¡œ ì¤„ë°”ê¿ˆ)

**ìƒíƒœ**:
- `messages`: Zustand ìŠ¤í† ì–´ì—ì„œ ê°€ì ¸ì˜¨ ë©”ì‹œì§€ ë°°ì—´
- `input`: í˜„ì¬ ì…ë ¥ ì¤‘ì¸ í…ìŠ¤íŠ¸
- `isLoading`: AI ì‘ë‹µ ëŒ€ê¸° ì¤‘ ì—¬ë¶€

#### 3. CanvasPanel.tsx (ì—ë””í„° íŒ¨ë„)
**ì—­í• **: ë§ˆí¬ë‹¤ìš´ ë¬¸ì„œ í¸ì§‘ ë° ê´€ë¦¬
**ì£¼ìš” ê¸°ëŠ¥**:
- ë¬¸ì„œ ì œëª© í¸ì§‘ (ë”ë¸”í´ë¦­ ë˜ëŠ” ì—°í•„ ì•„ì´ì½˜ í´ë¦­)
- íŒŒì¼ ì—´ê¸°/ì €ì¥/ìƒˆ íŒŒì¼ ìƒì„±
- í…ìŠ¤íŠ¸ ì„ íƒ ì‹œ SelectionPopup í‘œì‹œ
- ì—ë””í„° ìë™ ì €ì¥

**UI êµ¬ì„±**:
- **ì œëª© ì˜ì—­**:
  - ë¬¸ì„œ ì œëª© (í¸ì§‘ ê°€ëŠ¥)
  - í¸ì§‘ ë²„íŠ¼ (ì—°í•„ ì•„ì´ì½˜)
  - íŒŒì¼ ê´€ë¦¬ ë²„íŠ¼ (ì—´ê¸°, ì €ì¥, ìƒˆ íŒŒì¼)

- **ë„êµ¬ëª¨ìŒ**:
  - EditorToolbar ì»´í¬ë„ŒíŠ¸

- **ì—ë””í„° ì˜ì—­**:
  - MilkdownEditor ì»´í¬ë„ŒíŠ¸
  - í…ìŠ¤íŠ¸ ì„ íƒ ê°ì§€ ë° SelectionPopup í‘œì‹œ

**ìƒíƒœ**:
- `documentTitle`: ë¬¸ì„œ ì œëª©
- `isEditingTitle`: ì œëª© í¸ì§‘ ëª¨ë“œ ì—¬ë¶€
- `selection`: ì„ íƒëœ í…ìŠ¤íŠ¸ ì •ë³´ (text, x, y)
- `canvasContent`: Zustand ìŠ¤í† ì–´ì˜ ë§ˆí¬ë‹¤ìš´ ì½˜í…ì¸ 
- `currentFilePath`: í˜„ì¬ ì—´ë¦° íŒŒì¼ ê²½ë¡œ

**í…ìŠ¤íŠ¸ ì„ íƒ ë©”ì»¤ë‹ˆì¦˜**:
1. `mouseup` ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆë¡œ í…ìŠ¤íŠ¸ ì„ íƒ ê°ì§€
2. `window.getSelection()`ìœ¼ë¡œ ì„ íƒ ì˜ì—­ ê°€ì ¸ì˜¤ê¸°
3. ì„ íƒ ì˜ì—­ì˜ ìœ„ì¹˜(x, y) ê³„ì‚°
4. SelectionPopupì— ìœ„ì¹˜ì™€ í…ìŠ¤íŠ¸ ì „ë‹¬
5. `mousedown` ì´ë²¤íŠ¸ ì‹œ íŒì—… ìˆ¨ê¹€

#### 4. MilkdownEditor.tsx (ë§ˆí¬ë‹¤ìš´ ì—ë””í„°)
**ì—­í• **: Milkdown ë¼ì´ë¸ŒëŸ¬ë¦¬ React ë˜í¼
**ì£¼ìš” ê¸°ëŠ¥**:
- Milkdown ì—ë””í„° ì´ˆê¸°í™” ë° ì„¤ì •
- ì™¸ë¶€ ì½˜í…ì¸  ë³€ê²½ ê°ì§€ ë° ì—ë””í„° ë™ê¸°í™”
- ì—ë””í„° ë³€ê²½ì‚¬í•­ì„ Zustand ìŠ¤í† ì–´ì— ìë™ ì €ì¥ (1ì´ˆ ê°„ê²©)

**í”ŒëŸ¬ê·¸ì¸**:
- `commonmark`: ê¸°ë³¸ ë§ˆí¬ë‹¤ìš´ ë¬¸ë²•
- `history`: Undo/Redo ê¸°ëŠ¥

**ë™ê¸°í™” ë©”ì»¤ë‹ˆì¦˜**:
- **ì™¸ë¶€ â†’ ì—ë””í„°**: `canvasContent` ë³€ê²½ ì‹œ `replaceAll` ì•¡ì…˜ ì‹¤í–‰
- **ì—ë””í„° â†’ ì™¸ë¶€**: 1ì´ˆë§ˆë‹¤ `getMarkdown` ì•¡ì…˜ìœ¼ë¡œ ì½˜í…ì¸  ì¶”ì¶œ ë° ìŠ¤í† ì–´ ì—…ë°ì´íŠ¸

#### 5. EditorToolbar.tsx (í¸ì§‘ ë„êµ¬ëª¨ìŒ)
**ì—­í• **: ë§ˆí¬ë‹¤ìš´ ì„œì‹ ì ìš© ë²„íŠ¼ ì œê³µ
**ë²„íŠ¼ êµ¬ì„±**:
- **íˆìŠ¤í† ë¦¬**: Undo, Redo
- **í…ìŠ¤íŠ¸ ì„œì‹**: Bold, Italic
- **êµ¬ì¡°**: Heading (H1-H3), Bullet List, Numbered List
- **íŠ¹ìˆ˜**: Code Block, Quote

**ê¸°ëŠ¥**:
- ê° ë²„íŠ¼ í´ë¦­ ì‹œ Milkdown ì—ë””í„°ì— í•´ë‹¹ ëª…ë ¹ ì „ë‹¬
- í˜„ì¬ ì»¤ì„œ ìœ„ì¹˜ ë˜ëŠ” ì„ íƒ ì˜ì—­ì— ì„œì‹ ì ìš©

#### 6. SelectionPopup.tsx (í…ìŠ¤íŠ¸ ì„ íƒ íŒì—…)
**ì—­í• **: ì„ íƒëœ í…ìŠ¤íŠ¸ì— ëŒ€í•œ AI ì§ˆë¬¸ ì…ë ¥
**í‘œì‹œ ì¡°ê±´**:
- í…ìŠ¤íŠ¸ê°€ ì„ íƒë˜ì–´ ìˆì„ ë•Œ
- `isVisible` propì´ trueì¼ ë•Œ

**UI êµ¬ì„±**:
- Gemini ì•„ì´ì½˜ (ê·¸ë¼ë°ì´ì…˜ ë³„ ëª¨ì–‘)
- ì…ë ¥ì°½ (í”Œë ˆì´ìŠ¤í™€ë”: "ì„ íƒëœ í…ìŠ¤íŠ¸" ì— ëŒ€í•´ ë¬¼ì–´ë³´ê¸°)
- ì„ íƒëœ í…ìŠ¤íŠ¸ê°€ 50ì ì´ˆê³¼ ì‹œ ë§ì¤„ì„í‘œ í‘œì‹œ

**ìœ„ì¹˜**:
- ì„ íƒëœ í…ìŠ¤íŠ¸ ë°”ë¡œ ì•„ë˜ ì¤‘ì•™ì— í‘œì‹œ
- ì ˆëŒ€ ìœ„ì¹˜(absolute positioning) ì‚¬ìš©

---

## ìƒíƒœ ê´€ë¦¬ (Zustand Store)

### Store êµ¬ì¡°
```typescript
interface AppState {
  messages: Message[];          // ì±„íŒ… ë©”ì‹œì§€ ë°°ì—´
  canvasContent: string;        // ì—ë””í„° ë§ˆí¬ë‹¤ìš´ ì½˜í…ì¸ 
  isLoading: boolean;           // AI ì‘ë‹µ ëŒ€ê¸° ì¤‘
  currentFilePath: string | null; // í˜„ì¬ íŒŒì¼ ê²½ë¡œ
  isDrawerOpen: boolean;        // ëª¨ë°”ì¼ ë“œë¡œì–´ ìƒíƒœ
  
  // ì•¡ì…˜ë“¤
  addMessage: (role, content) => void;
  updateLastMessage: (content) => void;
  setCanvasContent: (content) => void;
  setIsLoading: (loading) => void;
  setCurrentFilePath: (path) => void;
  applyToCanvas: (content) => void;
  clearMessages: () => void;
  toggleDrawer: () => void;
  closeDrawer: () => void;
}
```

### Message íƒ€ì…
```typescript
interface Message {
  id: string;              // ê³ ìœ  ID (íƒ€ì„ìŠ¤íƒ¬í”„)
  role: 'user' | 'assistant'; // ë©”ì‹œì§€ ì—­í• 
  content: string;         // ë©”ì‹œì§€ ë‚´ìš©
  timestamp: Date;         // ìƒì„± ì‹œê°„
}
```

### ì£¼ìš” ì•¡ì…˜
- **addMessage**: ìƒˆ ë©”ì‹œì§€ ì¶”ê°€ (ì‚¬ìš©ì/AI)
- **updateLastMessage**: ë§ˆì§€ë§‰ AI ë©”ì‹œì§€ì— í…ìŠ¤íŠ¸ ì¶”ê°€ (ìŠ¤íŠ¸ë¦¬ë°ìš©)
- **applyToCanvas**: AI ì‘ë‹µì„ ì—ë””í„°ì— ì¶”ê°€
- **clearMessages**: ëª¨ë“  ë©”ì‹œì§€ ì‚­ì œ (ìƒˆ ì±„íŒ… ì‹œì‘)

---

## ë°±ì—”ë“œ API (Express ì„œë²„)

### ì„œë²„ ì„¤ì •
- **í¬íŠ¸**: 50000 (í™˜ê²½ë³€ìˆ˜ `PORT`)
- **í˜¸ìŠ¤íŠ¸**: 0.0.0.0 (í™˜ê²½ë³€ìˆ˜ `HOST`)
- **ë°ì´í„° ë””ë ‰í† ë¦¬**: `./data/` (ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ì €ì¥)

### API ì—”ë“œí¬ì¸íŠ¸

#### 1. íŒŒì¼ ì½ê¸°
```
GET /api/files?path=<filename>
```
**ê¸°ëŠ¥**: ì§€ì •ëœ íŒŒì¼ ì½ê¸°
**ì‘ë‹µ**: `{ content: string }`
**ì—ëŸ¬**: 404 (íŒŒì¼ ì—†ìŒ), 400 (ì˜ëª»ëœ ê²½ë¡œ)

#### 2. íŒŒì¼ ì €ì¥
```
POST /api/files
Body: { path: string, content: string }
```
**ê¸°ëŠ¥**: íŒŒì¼ ì €ì¥ (ì—†ìœ¼ë©´ ìƒì„±)
**ì‘ë‹µ**: `{ success: true }`
**ì—ëŸ¬**: 400 (ì˜ëª»ëœ ê²½ë¡œ)

#### 3. íŒŒì¼ ëª©ë¡
```
GET /api/files/list
```
**ê¸°ëŠ¥**: ë§ˆí¬ë‹¤ìš´ íŒŒì¼ ëª©ë¡ ì¡°íšŒ
**ì‘ë‹µ**: `{ files: string[] }`

#### 4. AI ì±„íŒ…
```
POST /api/chat
Body: { prompt: string }
```
**ê¸°ëŠ¥**: Gemini AIì™€ ëŒ€í™” (SSE ìŠ¤íŠ¸ë¦¬ë°)
**ì‘ë‹µ**: Server-Sent Events ìŠ¤íŠ¸ë¦¼
**ì´ë²¤íŠ¸**: `data: <í…ìŠ¤íŠ¸ ì¡°ê°>`, `event: done`

**ìŠ¤íŠ¸ë¦¬ë° ë©”ì»¤ë‹ˆì¦˜**:
1. í´ë¼ì´ì–¸íŠ¸ê°€ í”„ë¡¬í”„íŠ¸ ì „ì†¡
2. ì„œë²„ê°€ Gemini API í˜¸ì¶œ
3. ì‘ë‹µì„ ì²­í¬ ë‹¨ìœ„ë¡œ ìˆ˜ì‹ í•˜ë©° SSEë¡œ ì „ì†¡
4. ì™„ë£Œ ì‹œ `event: done` ì „ì†¡
5. ì—°ê²° ì¢…ë£Œ

---

## ë¹Œë“œ & ì‹¤í–‰ ëª…ë ¹ì–´

### ê°œë°œ ëª¨ë“œ
```bash
# Electron ë°ìŠ¤í¬í†± ì•± ê°œë°œ
npm run dev

# ì›¹ ë¸Œë¼ìš°ì € ê°œë°œ (í¬íŠ¸ 5173)
npm run dev:web

# ì„œë²„ ëª¨ë“œ ê°œë°œ (í¬íŠ¸ 50000)
npm run server:dev
```

### í”„ë¡œë•ì…˜ ë¹Œë“œ
```bash
# Electron ì•± ë¹Œë“œ
npm run build

# ì›¹ ë¹Œë“œ
npm run build:web

# ì„œë²„ ë¹Œë“œ
npm run build:server

# ì„œë²„ ì‹¤í–‰
npm run server
```

---

## í™˜ê²½ë³„ íŠ¹ì§•

### Electron ë°ìŠ¤í¬í†±
- ì§ì ‘ íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼
- ë„¤ì´í‹°ë¸Œ íŒŒì¼ ë‹¤ì´ì–¼ë¡œê·¸
- ë¡œì»¬ ë°ì´í„° ì €ì¥

### ì›¹ ë¸Œë¼ìš°ì €
- ì„œë²„ APIë¥¼ í†µí•œ íŒŒì¼ ê´€ë¦¬
- ë¸Œë¼ìš°ì € ë³´ì•ˆ ì •ì±… ì¤€ìˆ˜
- ì„¸ì…˜ ê¸°ë°˜ ë°ì´í„°

### ì„œë²„ ëª¨ë“œ
- REST API ì œê³µ
- íŒŒì¼ ê¸°ë°˜ ì €ì¥ì†Œ
- ë‹¤ì¤‘ í´ë¼ì´ì–¸íŠ¸ ì§€ì›

---

## í”„ë¡œì íŠ¸ êµ¬ì¡°

```
ai-canvas/
â”œâ”€â”€ src/                      # í”„ë¡ íŠ¸ì—”ë“œ
â”‚   â”œâ”€â”€ components/
â”‚   â”‚   â”œâ”€â”€ ChatPanel.tsx        # AI ì±„íŒ… UI
â”‚   â”‚   â”œâ”€â”€ CanvasPanel.tsx      # ì—ë””í„° íŒ¨ë„
â”‚   â”‚   â”œâ”€â”€ MilkdownEditor.tsx   # ë§ˆí¬ë‹¤ìš´ ì—ë””í„°
â”‚   â”‚   â”œâ”€â”€ EditorToolbar.tsx    # í¸ì§‘ ë„êµ¬ëª¨ìŒ
â”‚   â”‚   â””â”€â”€ SelectionPopup.tsx   # í…ìŠ¤íŠ¸ ì„ íƒ íŒì—…
â”‚   â”œâ”€â”€ store/
â”‚   â”‚   â””â”€â”€ useStore.ts          # Zustand ìƒíƒœ ê´€ë¦¬
â”‚   â”œâ”€â”€ lib/
â”‚   â”‚   â””â”€â”€ api.ts               # API ì¶”ìƒí™” ë ˆì´ì–´
â”‚   â”œâ”€â”€ App.tsx                  # ë£¨íŠ¸ ì»´í¬ë„ŒíŠ¸
â”‚   â””â”€â”€ main.tsx                 # React ì§„ì…ì 
â”œâ”€â”€ electron/                 # Electron
â”‚   â”œâ”€â”€ main.ts                  # ë©”ì¸ í”„ë¡œì„¸ìŠ¤
â”‚   â””â”€â”€ preload.ts               # í”„ë¦¬ë¡œë“œ ìŠ¤í¬ë¦½íŠ¸
â”œâ”€â”€ server/                   # Express ì„œë²„
â”‚   â””â”€â”€ index.ts
â””â”€â”€ data/                     # ì„œë²„ ë°ì´í„° ë””ë ‰í† ë¦¬
```
